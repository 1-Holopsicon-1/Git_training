<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
        crossorigin="anonymous"></script>

    {% load static %}
    <title>Title</title>
</head>
<body>

    <form name="form" method="POST" id="form-main">
        {% csrf_token %}

        <label>Title</label>
        <textarea id="title" name="title" rows="1" cols="50" style="resize: none;">{{survey.title}}</textarea>
        <br>
        <label>Description</label>
        <textarea id="description" name="description" rows="4" cols="50" style="resize: none;">{{survey.description}}</textarea>
        <br>

        <label>Limit access by link</label>
        <input id="linkAccess" name="linkAccess" type="checkbox">
        <br>

        <section id="questions-section">
            {% for question, answer_group, index in answers %}
                <label id="question{{index}}l">Question{{index}}</label>
                <textarea id="question{{index}}" name="question{{index}}" rows="1" cols="50" maxlength="255" style="resize: none;">{{question.text}}</textarea>
                <input id="question{{index}}b" type="button" value="delete" onclick="removeQuestion(this)">

                <br id="nline1{{index}}">
                <label id="multichoice{{index}}l">Enable multichoice</label>
                {% if question.multipleChoice %}
                <input id="multichoice{{index}}" type="checkbox" checked>
                {% else %}
                <input id="multichoice{{index}}" type="checkbox">
                {% endif %}

                <br id="nline2{{index}}">
                <section id="answers-section-{{index}}">
                    {% for answer, jndex in answer_group %}
                        <label id="answer{{index}}_{{jndex}}l">Answer{{jndex}}</label>
                        <textarea id="answer{{index}}_{{jndex}}" name="answer{{index}}_{{jndex}}" rows="2" cols="50" maxlength="255" style="resize: none;">{{answer.text}}</textarea>
                        <input id="answer{{index}}_{{jndex}}b" type="button" value="delete" onclick="removeAnswer({{jndex}}, this)">
                        <br id="answer{{index}}_{{jndex}}nl">
                    {% endfor %}
                </section>

                <input id="add_answer{{index}}"type="button" value="Add answer" onclick="addAnswer({{index}}, false)">
                <p id="pline{{index}}"></p>
            {% endfor %}
        </section><p></p>

        <input id="add" type="button" value="Add question" onclick="addQuestion()"><br>
        
        <label style="font-weight: bolder;">WARNING! ALL VOTES WILL BE RESETED AFTER EDITING!</label>
        <br>
        <input id="create" name="create" type="submit" value="Save">
        <input id="delete" name="delete" type="submit" value="Delete">

        <p></p>
        <div id="div_messages">
        </div>
    </form>

    {% include 'menu.html' %}

    <script src="{% static 'js/surveyEditingAjax.js' %}"></script>
    <script src="{% static 'js/surveyHandler.js' %}"></script>
</body>
</html>